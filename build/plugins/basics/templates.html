
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
	<meta charset="utf-8" />
	<title>Templates - Blocks Docs</title>
	<link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
	<link rel="stylesheet" href="../../_static/css/docs.css" type="text/css" />
</head>

<body>
	<div class="sidebar">
		<div class="content">
			<h1>Blocks Docs</h1>

			<nav class="nav">
				<ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Blocks Docs Home</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installing and Updating</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">System Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../templating/index.html">Templating</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Plugin Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gettingstarted.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html">Plugin Settings</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Templates</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="resources.html">Front-end Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="i18n.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../db/querybuilder.html">The Query Builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../db/records.html">Active Record Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../db/migrations.html">Migrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../components/widgets.html">Dashboard Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../components/blocktypes.html">Block Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/models.html">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/controllers.html">Controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/variables.html">Template Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/account.html">AccountService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/blockTypes.html">BlockTypesService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/config.html">ConfigService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/email.html">EmailService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/entries.html">EntriesService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/globals.html">GlobalsService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/pages.html">PagesService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/path.html">PathService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/request.html">HttpRequestService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/i18n.html">LocalizationService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/plugins.html">PluginsService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/templates.html">TemplatesService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/users.html">UsersService</a></li>
</ul>
</li>
</ul>

			</nav>
		</div>
	</div>

	<div class="main">
		<div class="content">
			
				<ul class="crumbs">
					<li><a href="../index.html">Plugin Development</a></li>
				</ul>
			

			
  <div class="section" id="templates">
<h1>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h1>
<p>In Blocks, all HTML rendering is done via <a class="reference internal" href="../../templating/index.html"><em>templates</em></a> –&nbsp;even for the Control Panel itself. There are no PHP-based view files.</p>
<p>If your plugin needs its own templates, you can place them in a templates/ folder within your plugin’s folder (ex: blocks/plugins/cocktailrecipes/templates/).</p>
<div class="section" id="plugin-template-paths-explained">
<span id="plugin-template-paths"></span><h2>Plugin Template Paths, Explained<a class="headerlink" href="#plugin-template-paths-explained" title="Permalink to this headline">¶</a></h2>
<p>To manually render a template from your plugin’s PHP code, call <tt class="docutils literal"><span class="pre">blx()-&gt;templates-&gt;render('PluginHandle/path/to/template')</span></tt> (see <a class="reference internal" href="../apis/templates.html"><em>TemplatesService</em></a>).</p>
<p>That path you pass to <tt class="docutils literal"><span class="pre">render()</span></tt> is your <strong>plugin template path</strong>. Plugin template paths are made up of two parts:</p>
<div class="highlight-python"><pre>[Lowercase plugin handle]/[Template path, relative to your plugin’s templates/ folder]</pre>
</div>
<p>So, if you were to call <tt class="docutils literal"><span class="pre">blx()-&gt;templates-&gt;render('cocktailrecipes/settings')</span></tt>, for example, Blocks would check the following locations, in this order:</p>
<ol class="arabic simple">
<li>blocks/app/templates/cocktailrecipes/settings.html</li>
<li>blocks/app/templates/cocktailrecipes/settings/index.html</li>
<li><strong>blocks/plugins/cocktailrecipes/templates/settings.html</strong></li>
<li><strong>blocks/plugins/cocktailrecipes/templates/settings/index.html</strong></li>
</ol>
<p>As you can see, the “templates/” folder segment is assumed, so there’s no need to include it when calling <tt class="docutils literal"><span class="pre">render()</span></tt>.</p>
</div>
<div class="section" id="giving-your-plugin-its-own-control-panel-section">
<h2>Giving your Plugin its own Control Panel Section<a class="headerlink" href="#giving-your-plugin-its-own-control-panel-section" title="Permalink to this headline">¶</a></h2>
<p>If you want to give your plugin its own Control Panel section, add this to your primary plugin class:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Blocks</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CocktailRecipesPlugin</span> <span class="k">extends</span> <span class="nx">BasePlugin</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">hasCpSection</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With that set, your plugin will show up in the CP nav. Clicking on it will take you to admin/PluginHandle, which will route to index.html within your plugin’s templates/ folder.</p>
<p>Your plugin’s CP section can have as many pages as you’d like. To link to other pages, use the <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">url()</span> <span class="pre">}}</span></tt> template function just like you would in your site’s templates (ex: <tt class="docutils literal"><span class="pre">href=&quot;{{</span> <span class="pre">url('cocktailrecipes/all')</span> <span class="pre">}}</span></tt>).</p>
<div class="section" id="extending-the-cp-layout">
<h3>Extending the CP layout<a class="headerlink" href="#extending-the-cp-layout" title="Permalink to this headline">¶</a></h3>
<p>Most of the time you’ll want your plugin’s templates to look like the rest of the CP. To do that, they must extend the <tt class="docutils literal"><span class="pre">_layouts/cp</span></tt> layout.</p>
<p>The <tt class="docutils literal"><span class="pre">_layouts/cp</span></tt> layout expects two variables to be set: <tt class="docutils literal"><span class="pre">title</span></tt> and <tt class="docutils literal"><span class="pre">content</span></tt>. <tt class="docutils literal"><span class="pre">title</span></tt> is used to set the page’s <tt class="docutils literal"><span class="pre">&lt;title&gt;</span></tt> tag value, and <tt class="docutils literal"><span class="pre">content</span></tt> defines the HTML that should show up in the main #content div.</p>
<div class="highlight-html"><div class="highlight"><pre>{% extends &quot;_layouts/cp&quot; %}

{% set title = &quot;Cocktail Recipes&quot;|t %}

{% set content %}
    <span class="nt">&lt;p&gt;</span>Hello!<span class="nt">&lt;/p&gt;</span>
{% endset %}
</pre></div>
</div>
<p>White it’s not required, you should also set a <tt class="docutils literal"><span class="pre">header</span></tt> variable, which defines what goes in the page’s <tt class="docutils literal"><span class="pre">&lt;header&gt;</span></tt> up top:</p>
<div class="highlight-html"><div class="highlight"><pre>{% extends &quot;_layouts/cp&quot; %}

{% set title = &quot;Cocktail Recipes&quot;|t %}

{% set header %}
    <span class="nt">&lt;h1&gt;</span>{{ title }}<span class="nt">&lt;/h1&gt;</span>
{% endset %}

{% set content %}
    <span class="nt">&lt;p&gt;</span>Hello!<span class="nt">&lt;/p&gt;</span>
{% endset %}
</pre></div>
</div>
<p>If you want to specify a “back” button in the <tt class="docutils literal"><span class="pre">&lt;header&gt;</span></tt>, the <tt class="docutils literal"><span class="pre">header</span></tt> variable is the place to put that too:</p>
<div class="highlight-html"><div class="highlight"><pre>{% set header %}
    <span class="nt">&lt;h1&gt;</span>{{ title }}<span class="nt">&lt;/h1&gt;</span>

    <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;left&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">class=</span><span class="s">&quot;backbtn&quot;</span> <span class="na">href=</span><span class="s">&quot;{{ url(&#39;cocktailrecipes&#39;) }}&quot;</span><span class="nt">&gt;</span>
           {{ &quot;Cocktail Recipes&quot;|t }}
       <span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
{% endset %}
</pre></div>
</div>
</div>
</div>
<div class="section" id="dynamic-url-routing">
<h2>Dynamic URL Routing<a class="headerlink" href="#dynamic-url-routing" title="Permalink to this headline">¶</a></h2>
<p>By default, incoming requests are routed to a template with the same path as the request URI (possibly with “.html” or “/index.html” appended to it). Most of the time this works well, but it falls short for dynamic URLs, such as URLs where one of the segments is an ID or a slug. For example, you might want to route URLs that look like “admin/cocktailrecipes/123” to templates/_edit.html.</p>
<p>You can accomplish this by registering <strong>routes</strong>. Blocks gives plugins a chance to register new CP routes via the registerCpRoutes hook. Simply add a new method to your plugin called <tt class="docutils literal"><span class="pre">hookRegisterCpRoutes()</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Blocks</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CocktailRecipesPlugin</span> <span class="k">extends</span> <span class="nx">BasePlugin</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">hookRegisterCpRoutes</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;cocktailrecipes\/(?P&lt;recipeId&gt;\d+)&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;cocktailrecipes/_edit&#39;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As you can see, the method returns an array of routes. The keys are regular expressions that the request URI will be matched against, and the values are template paths to be loaded when a successful match occurs.</p>
<p>If your regular expression includes any named subpatterns, e.g. <tt class="docutils literal"><span class="pre">(?P&lt;recipeId&gt;\d+)</span></tt>, their match values will become available to the template as variables of the same name. So in this example, if the URI was “admin/cocktailrecipes/123”, the cocktailrecipes/_edit template would get loaded, and a <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">recipeId</span> <span class="pre">}}</span></tt> variable would be availade to it, with the value “123”.</p>
</div>
</div>



			
			<nav class="nav">
				Next up: <a href="resources.html">Front-end Resources</a></li>
			</nav>
			
		</div>
	</div>
</body>
</html>